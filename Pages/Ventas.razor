@page "/venta"

<div class="container">
    <div class="sale-form">
        <h3>Registro de Venta</h3>

        <div class="form-group">
            <label for="nombreCliente">Nombre del Cliente:</label>
            <input id="nombreCliente" class="form-control" type="text" @bind="nombreCliente" />
        </div>

        <div class="form-group">
            <label for="codigo">Código:</label>
            <input id="codigo" class="form-control" type="text" @bind="codigo" />
        </div>

        <div class="form-group">
            <label for="nombreProducto">Nombre del Producto:</label>
            <input id="nombreProducto" class="form-control" type="text" @bind="nombreProducto" />
        </div>

        <div class="form-group">
            <label for="precio">Precio:</label>
            <input id="precio" class="form-control" type="number" step="0.01" @bind="precio" />
        </div>
      

        <div class="form-group">
            <label for="cantidad">Cantidad:</label>
            <input id="cantidad" class="form-control" type="number" @bind="cantidad" />
        </div>
        <div class="form-group">
            <label for="monto">Monto </label>
            <input id="monto" class="form-control" type="number" @bind="monto" />
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary" @onclick="RegistrarVenta">Registrar Venta</button>
        </div>
    </div>

    @if (ventas.Count > 0)
    {
        <table class="table">
            <thead>
                <tr>
                    <th>Nombre del Cliente</th>
                    <th>Código</th>
                    <th>Nombre del Producto</th>
                    <th>Precio</th>
                    <th>Cantidad</th>
                    <th>monto</th>
                    <th>Total</th>
                    <th>Fecha</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var venta in ventas)
                {
                    <tr>
                        <td>@venta.NombreCliente</td>
                        <td>@venta.Codigo</td>
                        <td>@venta.NombreProducto</td>
                        <td>@venta.Precio</td>
                        <td>@venta.Cantidad</td>
                        <td>@venta.monto</td>
                        <td>@venta.Total</td>
                        <td>@venta.Fecha.ToString("dd/MM/yyyy")</td>
                    </tr>
                }
            </tbody>
        </table>
    }

    <div class="text-center">
        <a href="/">Volver al inicio</a>
    </div>
</div>

<style>
    .container {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        height: 100vh;
    }

    .sale-form {
        width: 600px;
    }

    .form-group {
        margin-bottom: 10px;
    }

    .text-center {
        text-align: center;
        margin-top: 20px;
    }

    .text-center a {
        color: blue;
        text-decoration: underline;
    }
</style>

@code {
    private string? nombreCliente;
    private string? codigo;
    private string? nombreProducto;
    private decimal precio;
    private int cantidad;
private int monto;
    private DateTime fecha = DateTime.Now;

    private List<Venta> ventas = new List<Venta>();

    private void RegistrarVenta()
    {
        if (!string.IsNullOrWhiteSpace(nombreCliente) && !string.IsNullOrWhiteSpace(codigo)
            && !string.IsNullOrWhiteSpace(nombreProducto) && precio > 0 && cantidad > 0)
        {
            var total = precio * cantidad;
                
            var venta = new Venta(nombreCliente, codigo, nombreProducto, precio, cantidad,monto, total, fecha);
            ventas.Add(venta);

            // Limpiar los campos después de guardar
            nombreCliente = string.Empty;
            codigo = string.Empty;
            nombreProducto = string.Empty;
            precio = 0;
            cantidad = 0;
            monto= 0 ;
            fecha = DateTime.Now;
        }
    }

    public class Venta
    {
        public Venta(string nombreCliente, string codigo, string nombreProducto, decimal precio, int cantidad,int Monto, decimal total, DateTime fecha)
        {
            NombreCliente = nombreCliente;
            Codigo = codigo;
            NombreProducto = nombreProducto;
            Precio = precio;
            Cantidad = cantidad;
            Monto = monto;
            Total = total;
            Fecha = fecha;
        }

        public string NombreCliente { get; set; }
        public string Codigo { get; set; }
        public string NombreProducto { get; set; }
        public decimal Precio { get; set; }
        public int Cantidad { get; set; }
      public int monto { get; set; }
        public decimal Total { get; set; }
        public DateTime Fecha { get; set; }
    }
}
